// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  // URL Ã© lida automaticamente do .env
}

enum Level {
  JUNIOR
  MID
  SENIOR
}

enum Currency {
  USD
  EUR
  AOA
  OTHER
}

model Area {
  id    Int    @id @default(autoincrement())
  name  String @unique
  slug  String @unique

  roles Role[]
}

model Role {
  id      Int    @id @default(autoincrement())
  name    String
  areaId  Int
  area    Area   @relation(fields: [areaId], references: [id])

  salaryEntries SalaryEntry[]
}

model SalaryEntry {
  id             Int      @id @default(autoincrement())
  roleId         Int
  role           Role     @relation(fields: [roleId], references: [id])
  level          Level
  country        String
  salary         Float
  currency       Currency @default(USD)
  yearsExperience Int?      // optional
  source         String
  createdAt      DateTime @default(now())

  @@index([roleId, level, country])
}
